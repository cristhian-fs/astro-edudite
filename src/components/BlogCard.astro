---
import AvatarComponent from '@/components/ui/avatar'
import { Badge } from '@/components/ui/badge'
import { Separator } from '@/components/ui/separator'
import {
  getCombinedReadingTime,
  getSubpostCount,
  isSubpost,
  parseAuthors,
} from '@/lib/data-utils'
import { formatDate } from '@/lib/utils'
import { Icon } from 'astro-icon/components'
import { Image } from 'astro:assets'
import type { CollectionEntry } from 'astro:content'
import Link from './Link.astro'

interface Props {
  entry: CollectionEntry<'blog'>
}

const { entry } = Astro.props
const formattedDate = formatDate(entry.data.date)
const readTime = await getCombinedReadingTime(entry.id)
const authors = await parseAuthors(entry.data.authors ?? [])
const subpostCount = !isSubpost(entry.id) ? await getSubpostCount(entry.id) : 0
---

<div
  class="transition-colors group project-card"
>
  <Link
    href={`/${entry.collection}/${entry.id}`}
    class="flex flex-col gap-4 sm:flex-row"
  >
    <div class="grow flex flex-col items-start p-4">
      <h3 class="mb-1 font-medium relative after:h-[1px] after:absolute after:w-0 after:left-0 after:bottom-0 after:bg-foreground after:transition-all after:duration-300 group-hover:after:w-full after:origin-bottom-left hover:after:origin-bottom-right">{entry.data.title}</h3>
      <p class="text-muted-foreground text-sm">{entry.data.description}</p>
    </div>
  </Link>
</div>